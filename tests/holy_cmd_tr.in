#! /bin/bash -e


#
# Translating a string argument
#
cmd='tr 12345 abcde a1b2c3d4e5'
v=`echo "$cmd" | @builddir@/holy-shell`
if test "$v" != aabbccddee; then echo "error: $cmd [$v]" >&2; exit 1; fi

cmd='tr -U abcdABCD'
v=`echo "$cmd" | @builddir@/holy-shell`
if test "$v" != ABCDABCD; then echo "error: $cmd [$v]" >&2; exit 1; fi

cmd='tr -D ABCDabcd'
v=`echo "$cmd" | @builddir@/holy-shell`
if test "$v" != abcdabcd; then echo "error: $cmd [$v]" >&2; exit 1; fi

#
# Translating a variable value
#
cmd='foo=12345678; tr -s foo 1234 abcd; echo $foo'
v=`echo "$cmd" | @builddir@/holy-shell`
if test "$v" != abcd5678; then echo "error: $cmd [$v]" >&2; exit 1; fi

cmd='foo=abcdEFGH; tr -U -s foo; echo $foo'
v=`echo "$cmd" | @builddir@/holy-shell`
if test "$v" != ABCDEFGH; then echo "error: $cmd [$v]" >&2; exit 1; fi

cmd='foo=abcdEFGH; tr -D -s foo; echo $foo'
v=`echo "$cmd" | @builddir@/holy-shell`
if test "$v" != abcdefgh; then echo "error: $cmd [$v]" >&2; exit 1; fi

#
# Setting a variable from string argument
#
cmd='foo=12345678; tr -s foo 1234 abcd a1b2c3d4e5; echo $foo'
v=`echo "$cmd" | @builddir@/holy-shell`
if test "$v" != aabbccdde5; then echo "error: $cmd [$v]" >&2; exit 1; fi

cmd='foo=abcdEFGH; tr -U -s foo xyz; echo $foo'
v=`echo "$cmd" | @builddir@/holy-shell`
if test "$v" != XYZ; then echo "error: $cmd [$v]" >&2; exit 1; fi

cmd='foo=abcdEFGH; tr -D -s foo XYZ; echo $foo'
v=`echo "$cmd" | @builddir@/holy-shell`
if test "$v" != xyz; then echo "error: $cmd [$v]" >&2; exit 1; fi
